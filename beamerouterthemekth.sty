\mode<presentation>

% Frame title
\defbeamertemplate*{frametitle}{kth}[1][]
{%
  \leavevmode%
  \hbox{%
    \hskip-\beamer@leftmargin%
    \begin{beamercolorbox}[wd=\logosize, sep=.25\logosize, ht=\logosize, #1]{logo in head}%
    \includegraphics[width=.5\logosize,
      keepaspectratio]{KTH_Logotyp_RGB_2013.pdf}%
  \end{beamercolorbox}%
  \hskip\titleskip%
  \begin{beamercolorbox}[wd=\dimexpr\paperwidth-\beamer@leftmargin-\beamer@rightmargin, ht=\logosize, #1]{frametitle}%
    \ifx\insertframesubtitle\@empty%
      \strut\Large\insertframetitle\strut%
    \else%
      \strut\Large\insertframetitle\par%
      \strut\large\insertframesubtitle%
    \fi%
    \vskip.02\paperwidth%
  \end{beamercolorbox}%
  }%
}

% Footline
\defbeamertemplate*{footline}{kth}[1][]%
{%
  \begin{beamercolorbox}[wd=\paperwidth, leftskip=0pt, ht=\bannerheight,
      #1]{footer}%
    \tikzexternaldisable%
    \begin{tikzpicture}[overlay]%
      \begin{scope}[draw=kthblue]%
        \draw [fill=kthblue] (0,0.08334877\paperheight) [rounded corners =
          0.0109831130975\paperheight] -|
        (0.13791111\paperwidth,0.13243378\paperheight) [rounded corners=0pt]
        -| (\the\paperwidth,0) -| cycle;
      \end{scope}%
      \node (footnotes) at (0.13791111\paperwidth,0.13243378\paperheight) {};
      \printFootnotes[tikz]%
      \node [anchor=south east] at (\the\paperwidth,0) {\insertframenumber};
    \end{tikzpicture}%
    \tikzexternalenable%
  \end{beamercolorbox}%
}

\mode<all>
